<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout | Mighty Ape Gifts</title>
    <meta name="description" content="Complete your purchase at Mighty Ape Gifts. Fast shipping across New Zealand with Jungle Express delivery.">
    <meta name="keywords" content="checkout, payment, Mighty Ape, gifts NZ, New Zealand">
    
    <!-- Favicon -->
    <link rel="icon" href="/images/logo.png" type="image/x-icon">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <style>
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        
        /* Form input styling */
        .form-input {
            transition: all 0.2s ease;
        }
        
        .form-input:focus {
            border-color: #8b5cf6;
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.2);
        }
        
        /* Error styling */
        .error-message {
            display: none;
            color: #ef4444;
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }
        
        .input-error {
            border-color: #ef4444;
        }
        
        /* Loading spinner */
        .spinner {
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Shipping method selection */
        .shipping-method {
            transition: all 0.2s ease;
        }
        
        .shipping-method.selected {
            border-color: #8b5cf6;
            background-color: #f5f3ff;
        }
        
        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 0.5rem;
            max-width: 500px;
            width: 90%;
            text-align: center;
        }
        
        /* Mobile menu animation */
        .mobile-menu {
            transform: translateX(-100%);
            transition: transform 0.3s ease;
        }
        
        .mobile-menu.open {
            transform: translateX(0);
        }
    </style>
</head>
<body class="font-sans bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow-md sticky top-0 z-40">
        <div class="container mx-auto px-4 py-3">
            <div class="flex items-center justify-between">
                <!-- Logo -->
                <div class="flex items-center">
                    <a href="/" class="flex items-center">
                        <img src="/images/logo.svg" alt="Mighty Ape Gifts" class="h-10 bg-black rounded-lg pr-1">
                    </a>
                </div>
                
                <!-- Navigation -->
                <nav class="hidden md:flex space-x-8">
                    <a href="/" class="text-purple-600 font-medium">Home</a>                    
                    <a href="/shop/" class="text-gray-700 hover:text-purple-600 transition">Shop</a>
                    <a href="/blog/" class="text-gray-700 hover:text-purple-600 transition">Blog</a>
                    <a href="/about/" class="text-gray-700 hover:text-purple-600 transition">About</a>
                    <a href="/contact/" class="text-gray-700 hover:text-purple-600 transition">Contact</a>
                </nav>
                
                <!-- Cart -->
                <div class="flex items-center space-x-4">
                    <a href="/cart/" class="relative p-2 text-gray-600 hover:text-purple-600 transition">
                        <i class="fas fa-shopping-cart"></i>
                        <span id="cart-count" class="absolute -top-1 -right-1 bg-purple-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">0</span>
                    </a>
                    <button id="mobile-menu-button" class="md:hidden p-2 text-gray-600 hover:text-purple-600 transition">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="fixed inset-0 bg-white z-50 mobile-menu">
        <div class="container mx-auto px-4 py-8">
            <div class="flex justify-between items-center mb-8">
                <a href="/" class="flex items-center">
                    <img src="/images/logo.svg" alt="Mighty Ape Gifts" class="h-10 bg-black rounded-lg pr-1">
                </a>
                <button id="close-menu" class="p-2 text-gray-600">
                    <i class="fas fa-times text-2xl"></i>
                </button>
            </div>
            <nav class="flex flex-col space-y-6">
                <a href="/" class="text-2xl font-medium text-purple-600">Home</a>
                <a href="/shop/" class="text-2xl font-medium text-gray-700">Shop</a>
                <a href="/blog/" class="text-2xl font-medium text-gray-700">Blog</a>
                <a href="/about/" class="text-2xl font-medium text-gray-700">About</a>
                <a href="/contact/" class="text-2xl font-medium text-gray-700">Contact</a>
            </nav>
        </div>
    </div>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Progress Steps -->
        <div class="flex justify-between items-center mb-12 max-w-2xl mx-auto">
            <div class="flex flex-col items-center">
                <div class="w-10 h-10 rounded-full bg-purple-600 text-white flex items-center justify-center mb-2">1</div>
                <span class="text-sm font-medium text-purple-600">Cart</span>
            </div>
            <div class="flex-1 h-1 bg-purple-600 mx-2"></div>
            <div class="flex flex-col items-center">
                <div class="w-10 h-10 rounded-full bg-purple-600 text-white flex items-center justify-center mb-2">2</div>
                <span class="text-sm font-medium text-purple-600">Details</span>
            </div>
            <div class="flex-1 h-1 bg-purple-600 mx-2"></div>
            <div class="flex flex-col items-center">
                <div class="w-10 h-10 rounded-full bg-gray-200 text-gray-600 flex items-center justify-center mb-2">3</div>
                <span class="text-sm font-medium text-gray-600">Payment</span>
            </div>
        </div>
        
        <div class="flex flex-col lg:flex-row gap-8">
            <!-- Checkout Form -->
            <div class="lg:w-2/3">
                <form id="checkout-form" class="bg-white rounded-xl shadow-sm p-6">
                    <h2 class="text-2xl font-bold mb-6">Shipping Information</h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                        <div>
                            <label for="first-name" class="block text-sm font-medium text-gray-700 mb-1">First Name</label>
                            <input type="text" id="first-name" name="first-name" class="w-full form-input rounded-lg border border-gray-300 px-3 py-2" required>
                            <div id="first-name-error" class="error-message">Please enter your first name</div>
                        </div>
                        
                        <div>
                            <label for="last-name" class="block text-sm font-medium text-gray-700 mb-1">Last Name</label>
                            <input type="text" id="last-name" name="last-name" class="w-full border form-input rounded-lg border-gray-300 px-3 py-2" required>
                            <div id="last-name-error" class="error-message">Please enter your last name</div>
                        </div>
                        
                        <div class="md:col-span-2">
                            <label for="address" class="block text-sm font-medium text-gray-700 mb-1">Street Address</label>
                            <input type="text" id="address" name="address" class="w-full border form-input rounded-lg border-gray-300 px-3 py-2" required>
                            <div id="address-error" class="error-message">Please enter your street address</div>
                        </div>
                        
                        <div>
                            <label for="city" class="block text-sm font-medium text-gray-700 mb-1">City</label>
                            <input type="text" id="city" name="city" class="w-full border form-input rounded-lg border-gray-300 px-3 py-2" required>
                            <div id="city-error" class="error-message">Please enter your city</div>
                        </div>
                        
                        <div>
                            <label for="postcode" class="block text-sm font-medium text-gray-700 mb-1">Postal Code</label>
                            <input type="text" id="postcode" name="postcode" class="w-full border form-input rounded-lg border-gray-300 px-3 py-2" required>
                            <div id="postcode-error" class="error-message">Please enter your postal code</div>
                        </div>
                        
                        <div class="md:col-span-2">
                            <label for="country" class="block text-sm font-medium text-gray-700 mb-1">Country</label>
                            <select id="country" name="country" class="w-full form-input border rounded-lg border-gray-300 px-3 py-2" required>
                                <option value="">Select Country</option>
                                <option value="NZ" selected>New Zealand</option>
                                <option value="AU">Australia</option>
                            </select>
                            <div id="country-error" class="error-message">Please select your country</div>
                        </div>
                        
                        <div class="md:col-span-2">
                            <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">Phone Number</label>
                            <input type="tel" id="phone" name="phone" class="w-full border form-input rounded-lg border-gray-300 px-3 py-2" required>
                            <div id="phone-error" class="error-message">Please enter a valid phone number</div>
                        </div>
                        
                        <div class="md:col-span-2">
                            <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
                            <input type="email" id="email" name="email" class="w-full border form-input rounded-lg border-gray-300 px-3 py-2" required>
                            <div id="email-error" class="error-message">Please enter a valid email address</div>
                        </div>
                    </div>
                    
                    <h2 class="text-2xl font-bold mb-6">Shipping Method</h2>
                    
                    <div class="space-y-4 mb-8">
                        <div class="flex items-center p-4 border border-gray-300 rounded-lg cursor-pointer shipping-method selected" data-value="standard">
                            <input type="radio" id="standard-shipping" name="shipping-method" class="mr-3" checked>
                            <div class="flex-1">
                                <div class="font-medium">Standard Delivery</div>
                                <div class="text-sm text-gray-600">3-5 business days</div>
                            </div>
                            <span class="font-medium">$5.00</span>
                        </div>
                        
                        <div class="flex items-center p-4 border border-gray-300 rounded-lg cursor-pointer shipping-method" data-value="express">
                            <input type="radio" id="express-shipping" name="shipping-method" class="mr-3">
                            <div class="flex-1">
                                <div class="font-medium">Jungle Express</div>
                                <div class="text-sm text-gray-600">Same day (order before 7pm)</div>
                            </div>
                            <span class="font-medium">$9.99</span>
                        </div>
                        
                        <div class="flex items-center p-4 border border-gray-300 rounded-lg cursor-pointer shipping-method" data-value="free" id="free-shipping-option">
                            <input type="radio" id="free-shipping" name="shipping-method" class="mr-3">
                            <div class="flex-1">
                                <div class="font-medium">Free Standard Delivery</div>
                                <div class="text-sm text-gray-600">On orders over $100</div>
                            </div>
                            <span class="font-medium text-purple-600">FREE</span>
                        </div>
                    </div>
                    
                    <h2 class="text-2xl font-bold mb-6">Payment Method</h2>
                    
                    <div class="space-y-4 mb-8">
                        <div class="p-4 border border-gray-300 rounded-lg bg-gray-50">
                            <div class="flex items-center">
                                <i class="fas fa-money-bill-wave text-2xl text-green-600 mr-4"></i>
                                <div>
                                    <div class="font-bold">Cash on Delivery</div>
                                    <div class="text-sm text-gray-600">Pay with cash when your order arrives</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6">
                        <div class="flex">
                            <div class="flex-shrink-0">
                                <i class="fas fa-exclamation-circle text-yellow-400"></i>
                            </div>
                            <div class="ml-3">
                                <p class="text-sm text-yellow-700">
                                    Please have exact cash ready when the delivery arrives. Our drivers do not carry change.
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex items-center mb-6">
                        <input type="checkbox" id="save-info" name="save-info" class="mr-3 rounded border-gray-300 text-purple-600 focus:ring-purple-500">
                        <label for="save-info" class="text-sm text-gray-700">Save this information for next time</label>
                    </div>
                    
                    <div class="flex items-center mb-6">
                        <input type="checkbox" id="subscribe" name="subscribe" class="mr-3 rounded border-gray-300 text-purple-600 focus:ring-purple-500" checked>
                        <label for="subscribe" class="text-sm text-gray-700">Subscribe to our newsletter for exclusive offers</label>
                    </div>
                    
                    <button type="submit" id="submit-btn" class="w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-lg font-medium transition flex items-center justify-center">
                        <span id="submit-text">Complete Order</span>
                        <svg id="spinner" class="hidden spinner h-5 w-5 ml-2 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                    </button>
                </form>
            </div>
            
            <!-- Order Summary -->
            <div class="lg:w-1/3">
                <div class="bg-white rounded-xl shadow-sm p-6 sticky top-4">
                    <h2 class="text-xl font-bold mb-4">Order Summary</h2>
                    
                    <div id="order-items" class="space-y-4 mb-6 max-h-96 overflow-y-auto">
                        <!-- Cart items will be dynamically inserted here -->
                    </div>
                    
                    <div class="space-y-4 mb-6">
                        <div class="flex justify-between">
                            <span class="text-gray-600">Subtotal</span>
                            <span id="order-subtotal" class="font-medium">$0.00</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Shipping</span>
                            <span id="order-shipping" class="font-medium">-</span>
                        </div>
                        <div class="flex justify-between border-t border-gray-200 pt-4">
                            <span class="text-gray-800 font-bold">Total</span>
                            <span id="order-total" class="text-xl font-bold text-purple-600">$0.00</span>
                        </div>
                    </div>
                    
                    <div class="text-sm text-gray-600">
                        <p class="mb-2">By completing your purchase, you agree to our <a href="/terms/" class="text-purple-600 hover:underline">Terms of Service</a>.</p>
                        <p>Need help? <a href="/contact/" class="text-purple-600 hover:underline">Contact our support team</a>.</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Thank You Modal -->
    <div id="thank-you-modal" class="modal">
        <div class="modal-content">
            <div class="mb-6">
                <svg class="mx-auto h-16 w-16 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
            </div>
            <h2 class="text-2xl font-bold mb-4">Thank You for Your Order!</h2>
            <p class="mb-6">Your order has been placed successfully. We've sent a confirmation email to <span id="confirmation-email" class="font-medium"></span>.</p>
            <p class="mb-6 text-sm text-gray-600">Order ID: <span id="order-id" class="font-mono"></span></p>
            <button id="close-modal" class="w-full bg-purple-600 hover:bg-purple-700 text-white py-2 px-4 rounded-lg font-medium transition">
                Continue Shopping
            </button>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white pt-16 pb-8">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-12">
                <div>
                    <div class="flex items-center mb-4">
                        <img src="/images/logo.svg" alt="Mighty Ape Gifts" class="h-10">
                    </div>
                    <p class="text-gray-400">Your one-stop shop for unique gifts in New Zealand.</p>
                </div>
                
                <div>
                    <h3 class="text-lg font-bold mb-4">Shop</h3>
                    <ul class="space-y-2">
                        <li><a href="/shop/" class="text-gray-400 hover:text-white transition">Gifts for Her</a></li>
                        <li><a href="/shop/" class="text-gray-400 hover:text-white transition">Gifts for Him</a></li>
                        <li><a href="/shop/" class="text-gray-400 hover:text-white transition">Home & Living</a></li>
                        <li><a href="/shop/" class="text-gray-400 hover:text-white transition">Novelty Gifts</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-lg font-bold mb-4">About</h3>
                    <ul class="space-y-2">
                        <li><a href="/about/" class="text-gray-400 hover:text-white transition">About</a></li>
                        <li><a href="/blog/" class="text-gray-400 hover:text-white transition">Blog</a></li>
                        <li><a href="/contact/" class="text-gray-400 hover:text-white transition">Contact Us</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-lg font-bold mb-4">Legal</h3>
                    <ul class="space-y-2">
                        <li><a href="/privacy/" class="text-gray-400 hover:text-white transition">Privacy Policy</a></li>
                        <li><a href="/terms/" class="text-gray-400 hover:text-white transition">Terms of Service</a></li>
                        <li><a href="/cookies/" class="text-gray-400 hover:text-white transition">Cookie Policy</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="border-t border-gray-800 pt-8">
                <div class="flex flex-col md:flex-row justify-center items-center">
                    <div class="text-gray-400 text-sm mb-4 md:mb-0">
                        &copy; 2025 Mighty Ape Gifts. All rights reserved.
                    </div>
                     
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Initialize cart if not exists
        if (!localStorage.getItem('cart')) {
            localStorage.setItem('cart', JSON.stringify([
                {
                    id: 1,
                    name: 'Personalized Engraved Wooden Watch',
                    price: 49.99,
                    quantity: 1,
                    image: 'https://via.placeholder.com/80'
                },
                {
                    id: 2,
                    name: 'Stainless Steel Water Bottle',
                    price: 24.99,
                    quantity: 2,
                    image: 'https://via.placeholder.com/80'
                }
            ]));
        }

        // Update cart count
        function updateCartCount() {
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            document.getElementById('cart-count').textContent = cart.reduce((total, item) => total + item.quantity, 0);
        }
        
        // Render order summary
        function renderOrderSummary() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const orderItemsContainer = document.getElementById('order-items');
            const subtotalElement = document.getElementById('order-subtotal');
            const shippingElement = document.getElementById('order-shipping');
            const totalElement = document.getElementById('order-total');
            
            // Calculate subtotal
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            subtotalElement.textContent = `$${subtotal.toFixed(2)}`;
            
            // Calculate shipping
            let shipping = 5.00; // Standard shipping
            if (subtotal >= 100) {
                shipping = 0;
                document.getElementById('free-shipping').checked = true;
                document.querySelector('.shipping-method[data-value="free"]').classList.add('selected');
                document.querySelector('.shipping-method[data-value="standard"]').classList.remove('selected');
                document.querySelector('.shipping-method[data-value="express"]').classList.remove('selected');
                shippingElement.textContent = 'FREE';
            } else {
                shippingElement.textContent = `$${shipping.toFixed(2)}`;
            }
            
            // Calculate total
            const total = subtotal + shipping;
            totalElement.textContent = `$${total.toFixed(2)}`;
            
            // Render cart items
            orderItemsContainer.innerHTML = '';
            
            if (cart.length === 0) {
                orderItemsContainer.innerHTML = '<div class="text-center py-4 text-gray-500">Your cart is empty</div>';
                return;
            }
            
            cart.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'flex items-center justify-between py-2 border-b border-gray-200 last:border-b-0';
                itemElement.innerHTML = `
                    <div class="flex items-center">
                        <img src="${item.image || 'https://via.placeholder.com/80'}" alt="${item.name}" class="w-16 h-16 object-contain rounded-lg mr-4">
                        <div>
                            <div class="font-medium">${item.name}</div>
                            <div class="text-sm text-gray-600">Qty: ${item.quantity}</div>
                        </div>
                    </div>
                    <div class="font-bold">$${(item.price * item.quantity).toFixed(2)}</div>
                `;
                orderItemsContainer.appendChild(itemElement);
            });
        }
        
        // Shipping method selection
        function setupShippingMethods() {
            document.querySelectorAll('.shipping-method').forEach(method => {
                method.addEventListener('click', function() {
                    document.querySelectorAll('.shipping-method').forEach(m => m.classList.remove('selected'));
                    this.classList.add('selected');
                    
                    const shippingValue = this.getAttribute('data-value');
                    const shippingElement = document.getElementById('order-shipping');
                    const subtotal = parseFloat(document.getElementById('order-subtotal').textContent.replace('$', ''));
                    
                    let shipping = 0;
                    if (shippingValue === 'standard') {
                        shipping = subtotal >= 100 ? 0 : 5.00;
                    } else if (shippingValue === 'express') {
                        shipping = 9.99;
                    }
                    
                    shippingElement.textContent = shipping === 0 ? 'FREE' : `$${shipping.toFixed(2)}`;
                    document.getElementById('order-total').textContent = `$${(subtotal + shipping).toFixed(2)}`;
                });
            });
        }
        
        // Form validation
        function validateForm() {
            let isValid = true;
            
            // Validate shipping information
            const requiredFields = [
                'first-name', 'last-name', 'address', 'city', 
                'postcode', 'country', 'phone', 'email'
            ];
            
            requiredFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                const errorElement = document.getElementById(`${fieldId}-error`);
                
                if (!field.value.trim()) {
                    field.classList.add('input-error');
                    errorElement.style.display = 'block';
                    isValid = false;
                } else {
                    field.classList.remove('input-error');
                    errorElement.style.display = 'none';
                }
            });
            
            // Validate email format
            const email = document.getElementById('email');
            const emailError = document.getElementById('email-error');
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            
            if (!emailRegex.test(email.value.trim())) {
                email.classList.add('input-error');
                emailError.style.display = 'block';
                isValid = false;
            } else {
                email.classList.remove('input-error');
                emailError.style.display = 'none';
            }
            
            // Validate phone number
            const phone = document.getElementById('phone');
            const phoneError = document.getElementById('phone-error');
            const phoneRegex = /^[0-9\-\+\s\(\)]{8,}$/;
            
            if (!phoneRegex.test(phone.value.trim())) {
                phone.classList.add('input-error');
                phoneError.style.display = 'block';
                isValid = false;
            } else {
                phone.classList.remove('input-error');
                phoneError.style.display = 'none';
            }
            
            return isValid;
        }
        
        // Show thank you modal
        function showThankYouModal(email) {
            const modal = document.getElementById('thank-you-modal');
            const orderId = Math.random().toString(36).substring(2, 10).toUpperCase();
            
            document.getElementById('confirmation-email').textContent = email;
            document.getElementById('order-id').textContent = orderId;
            
            modal.style.display = 'flex';
        }
        
        // Close modal and redirect
        function closeModal() {
            document.getElementById('thank-you-modal').style.display = 'none';
            window.location.href = '/';
        }
        
        // Mobile menu toggle
        function setupMobileMenu() {
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const closeMenuButton = document.getElementById('close-menu');
            const mobileMenu = document.getElementById('mobile-menu');
            
            mobileMenuButton.addEventListener('click', function() {
                mobileMenu.classList.add('open');
            });
            
            closeMenuButton.addEventListener('click', function() {
                mobileMenu.classList.remove('open');
            });
        }
        
        // Form submission
        function setupFormSubmission() {
            document.getElementById('checkout-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                if (!validateForm()) {
                    return;
                }
                
                // Show loading state
                const submitBtn = document.getElementById('submit-btn');
                const submitText = document.getElementById('submit-text');
                const spinner = document.getElementById('spinner');
                
                submitBtn.disabled = true;
                submitText.textContent = 'Processing...';
                spinner.classList.remove('hidden');
                
                // Simulate API call
                setTimeout(() => {
                    // Get form data
                    const formData = {
                        firstName: document.getElementById('first-name').value,
                        lastName: document.getElementById('last-name').value,
                        address: document.getElementById('address').value,
                        city: document.getElementById('city').value,
                        postcode: document.getElementById('postcode').value,
                        country: document.getElementById('country').value,
                        phone: document.getElementById('phone').value,
                        email: document.getElementById('email').value,
                        shippingMethod: document.querySelector('.shipping-method.selected').getAttribute('data-value'),
                        paymentMethod: 'cash_on_delivery',
                        items: JSON.parse(localStorage.getItem('cart')) || [],
                        subtotal: parseFloat(document.getElementById('order-subtotal').textContent.replace('$', '')),
                        shipping: document.getElementById('order-shipping').textContent === 'FREE' ? 0 : 
                                 parseFloat(document.getElementById('order-shipping').textContent.replace('$', '')),
                        total: parseFloat(document.getElementById('order-total').textContent.replace('$', '')),
                        saveInfo: document.getElementById('save-info').checked,
                        subscribe: document.getElementById('subscribe').checked
                    };
                    
                    // In a real app, you would send this data to your server
                    console.log('Order submitted:', formData);
                    
                    // Clear cart
                    localStorage.removeItem('cart');
                    updateCartCount();
                    
                    // Show thank you modal
                    showThankYouModal(formData.email);
                    
                    // Reset form and button state
                    submitBtn.disabled = false;
                    submitText.textContent = 'Complete Order';
                    spinner.classList.add('hidden');
                }, 1500);
            });
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updateCartCount();
            renderOrderSummary();
            setupShippingMethods();
            setupFormSubmission();
            setupMobileMenu();
            
            // Close modal handler
            document.getElementById('close-modal').addEventListener('click', closeModal);
            
            // Close modal when clicking outside
            document.getElementById('thank-you-modal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeModal();
                }
            });
        });
    </script>
</body>
</html>